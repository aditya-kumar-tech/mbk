<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Fetch Google Apps Script JSON</title>
</head>
<body>
  <h2>Jins List</h2>
  <ul id="jinsList"></ul>

  <h2>Data for Specific Date</h2>
  <input type="date" id="dataDate">
  <button id="fetchDataBtn">Fetch Data</button>
  <pre id="dataOutput"></pre>

  <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwAFHth2kD11WsxLhYcVEGd-QA6b7ETVl-2x86AixA/dev"; // Replace with your deployed web app URL

    // Function to fetch jins list
    function fetchJins() {
      fetch(`${SCRIPT_URL}?action=getJins`)
        .then(res => res.json())
        .then(data => {
          const ul = document.getElementById("jinsList");
          ul.innerHTML = "";
          if(data.jins && data.jins.length > 0) {
            data.jins.forEach(j => {
              const li = document.createElement("li");
              li.textContent = `${j.name} - ${j.qtl}`;
              ul.appendChild(li);
            });
          } else {
            ul.textContent = "No jins found";
          }
        })
        .catch(err => console.error("Error fetching jins:", err));
    }

    // Function to fetch data for a specific date
    function fetchData() {
      const date = document.getElementById("dataDate").value;
      if(!date) return alert("Select a date");

      fetch(`${SCRIPT_URL}?action=getData&date=${date}`)
        .then(res => res.json())
        .then(data => {
          const pre = document.getElementById("dataOutput");
          pre.textContent = JSON.stringify(data.data || [], null, 2);
        })
        .catch(err => console.error("Error fetching data:", err));
    }

    // Event listener
    document.getElementById("fetchDataBtn").addEventListener("click", fetchData);

    // Initial load
    fetchJins();
  </script>
</body>
</html>
